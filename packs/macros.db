{"_id":"RO2LvYX3MsSwCS2k","name":"Update All Sounds on Active Scene","type":"script","author":"Rzlj9JlfxTrImXEm","img":"icons/svg/sound.svg","scope":"global","command":"const updates = [];\nconst placeables = canvas.sounds.placeables;\n\n// Modify this part to edit whatever value you want.\nplaceables.forEach(value=> value.data.radius = value.data.radius * 10);\nplaceables.forEach(l => { updates.push(l.data) });\ngame.scenes.active.updateEmbeddedDocuments(\"AmbientSound\", updates)","folder":null,"sort":0,"permission":{"default":0,"Rzlj9JlfxTrImXEm":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.aMV7TaGkxTZtCgyW"}}}
{"_id":"fTTVSzylYfCpSSgH","name":"Magic Missile","type":"script","author":"Rzlj9JlfxTrImXEm","img":"icons/svg/dice-target.svg","scope":"global","command":"let macroName = \"Magic Missile\"\nlet macroEndLog = \"---------------------------------------------\"\n\nlet i=0;\n\nconsole.log(\"---------------------------------------------\");\nconsole.log(`${macroName} by CowManJones`);\nconsole.log(\"---------------------------------------------\");\nconsole.log(`${macroName} | Start`);\n\nconst drawingDetails = {\n      author: game.user._id,\n      fillAlpha: 0,\n      fillColor: \"#808080\",\n      fillType: 1,\n      fontFamily: \"FontAwesome\",\n      fontSize: 24,\n      height: 48,\n      hidden: false,\n      locked: false,\n      rotation: 0,\n      strokeAlpha: 1,\n      strokeColor: \"#000000\",\n      strokeWidth: 2,\n      text: i,\n      textAlpha: 1,\n      textColor: \"#ffffff\",\n      type: \"r\",\n      width: 48,\n      x: 250,\n      y: 250\n};\n\nconst currTargets = game.users.current.targets;\nlet targets = \"\";\n\ni = 0;\ncurrTargets.forEach(target => {\n  targets += `<p><label>${target.data.name}</label><input id=\"target-${i}\" name=\"target-${i}\" type=\"number\"/></p><br/>`;\n  i++;\n});\n\nconst htmlTargetDistribution = `\n    <form>\n      <h2>Distribute Magic Missiles</h2>\n      <div class=\"form-group\">\n        ${targets}\n      </div>\n    </form>\n    `;\n\ni = 0;\nlet dialogDistribution = new Dialog({\n  title: `${macroName}`,\n  content: htmlTargetDistribution,\n  buttons: {\n    confirm: {\n      icon: \"<i class='fas fa-tick'></i>\",\n      label: `Confirm`,\n      callback: htmlTargetDistribution => {\n        const dmgRoll = (new Roll(`1d4`));\n        dmgRoll.roll(async=true)\n        var dmgTotal = parseInt(dmgRoll.result) + 1;\n        currTargets.forEach(target => {\n          const mult = htmlTargetDistribution.find('[name=\"target-'+i+'\"]')[0].value;\n          dmgRoll.toMessage({\n            speaker: ChatMessage.getSpeaker(),\n            flavor: `${target.data.name} hit with ${mult} magic missile(s) for a total of ${dmgTotal}!`});\n          target.data.document.actor.applyDamage(dmgTotal, mult);\n          i++;\n        });\n        console.log(`${macroName} | Goodbye`);\n        console.log(macroEndLog);\n      }\n    },\n    cancel: {\n      icon: \"<i class='fas fa-times'></i>\",\n      label: `Cancel`,\n      callback: () => {\n        console.log(`${macroName} | Goodbye`);\n        console.log(macroEndLog);\n      }\n    },\n  },\n  default: \"cancel\",\n});\n\ndialogDistribution.render(true);","folder":null,"sort":0,"permission":{"default":0,"Rzlj9JlfxTrImXEm":3},"flags":{"core":{"sourceId":"Compendium.foundry_community_macros.community-macros-misc.wosXzUFEMQLD84so"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false}}}
{"_id":"gTbBUFUXM0ToWznm","name":"Update All Lights on Active Scene","type":"script","author":"Rzlj9JlfxTrImXEm","img":"icons/svg/light.svg","scope":"global","command":"const updates = [];\nconst placeables = canvas.lighting.placeables;\n\n// Modify this part to edit whatever value you want.\nplaceables.forEach(value=> value.data.config.bright = value.data.config.bright* 2);\nplaceables.forEach(value=> value.data.config.dim = value.data.config.dim * 2);\nplaceables.forEach(l => { updates.push(l.data) });\ngame.scenes.active.updateEmbeddedDocuments(\"AmbientLight\", updates)","folder":null,"sort":0,"permission":{"default":0,"Rzlj9JlfxTrImXEm":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.aMV7TaGkxTZtCgyW"}}}
